(window["webpackJsonpdbrain-bb"]=window["webpackJsonpdbrain-bb"]||[]).push([[0],{13:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(11),i=n.n(a),s=(n(18),n(1)),c=n(12),u=n(2),l=n(3),d=n(6),g=n(5),h=n(4),f=n(7),m=n(9),p=n.n(m),v=(n(20),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={isDragging:!1,direction:null},n.renderResizers=function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{x:e[0],y:e[1]-10,width:t[0]-e[0],height:20,fill:"rgba(0,0,0,0)",style:{cursor:"n-resize"},onMouseDown:function(e){return n.startResize(e,"top")}}),o.a.createElement("rect",{x:t[0]-10,y:e[1],width:20,height:t[1]-e[1],fill:"rgba(0,0,0,0)",style:{cursor:"e-resize"},onMouseDown:function(e){return n.startResize(e,"right")}}),o.a.createElement("rect",{x:e[0],y:t[1]-10,width:t[0]-e[0],height:20,fill:"rgba(0,0,0,0)",style:{cursor:"s-resize"},onMouseDown:function(e){return n.startResize(e,"bottom")}}),o.a.createElement("rect",{x:e[0]-10,y:e[1],width:20,fill:"rgba(0,0,0,0)",height:t[1]-e[1],style:{cursor:"w-resize"},onMouseDown:function(e){return n.startResize(e,"left")}}))},n.renderDeleteButton=function(e,t){return o.a.createElement("text",{x:e[0]+Math.abs(t[0]-e[0])/2-5,y:e[1]+Math.abs(t[1]-e[1])/2+5,style:{fontWeight:"bold",cursor:"pointer"},fill:"#FFF",onClick:n.handleDelete,onMouseDown:n.handleDeleteMouseDown},"\u2715")},n.handleDelete=function(e){e.stopPropagation();var t=n.props;(0,t.onDelete)(t.id)},n.handleDeleteMouseDown=function(e){return e.stopPropagation()},n.onResize=function(e){var t=n.state.direction;if(null!==t){var r=n.props,o=r.start,a=r.end,i=r.onChange,s=e.movementY,c=e.movementX;switch(t){case"top":i(o[0],o[1]+s,a[0],a[1],n.props.id);break;case"right":i(o[0],o[1],a[0]+c,a[1],n.props.id);break;case"bottom":i(o[0],o[1],a[0],a[1]+s,n.props.id);break;case"left":default:i(o[0]+c,o[1],a[0],a[1],n.props.id)}}},n.startResize=function(e,t){e.stopPropagation(),n.setState({direction:t}),document.body.addEventListener("mousemove",n.onResize)},n.endResize=function(e){e.stopPropagation(),n.setState({direction:null}),document.body.removeEventListener("mousemove",n.onResize)},n.onMouseMove=function(e){if(n.state.isDragging){var t=e.movementX,r=e.movementY,o=n.props,a=o.start,i=o.end;n.props.onChange(a[0]+t,a[1]+r,i[0]+t,i[1]+r,n.props.id)}},n.startDragging=function(e){e.stopPropagation(),document.body.addEventListener("mousemove",n.onMouseMove),n.setState({isDragging:!0})},n.handleMouseUp=function(e){var t=n.state,r=t.direction,o=t.isDragging;r&&n.endResize(e),o&&n.endDragging()},n.endDragging=function(){document.body.removeEventListener("mousemove",n.onMouseMove),n.setState({isDragging:!1})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.start,n=e.end,r=e.isNew,a=t[0]-n[0];return o.a.createElement("g",null,o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"Gradient",x1:"0",x2:"0",y1:"0",y2:"1"},o.a.createElement("stop",{offset:"0%",stopColor:"#FEE140"}),o.a.createElement("stop",{offset:"100%",stopColor:"#FA709A"}))),o.a.createElement("path",{d:"m ".concat(t[0]," ").concat(t[1]," l ").concat(n[0]-t[0]," 0 l 0 ").concat(n[1]-t[1]," l ").concat(a," 0 z"),style:{stroke:"#FEE140",fill:"url(#Gradient)",backgroundColor:"#8EC5FC",fillOpacity:"0.6",strokeWidth:"1"},onMouseDown:this.startDragging,onClick:this.handleClick,onMouseOver:this.handleMouseEnter,onMouseOut:this.handleMouseLeave}),o.a.createElement("g",null,!r&&this.renderDeleteButton(t,n),!r&&this.renderResizers(t,n)))}},{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.handleMouseUp)}}]),t}(r.Component)),b=n(8),y=n.n(b);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=50,x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).formatCoordinates=function(e){var t=n.svgRef.current.getBoundingClientRect().height;return e.map(function(e){var n=e.start,r=e.end;return[[n[0],t-n[1]],[r[0],t-r[1]]]})},n.onChange=function(){var e=n.props.onChange,t=n.state.rects;e(n.formatCoordinates(t))},n.handleResize=function(e){var t=n.svgRef.current.getBoundingClientRect().width,r=n.state.ratio;n.setState({currentHeight:t*r})},n.getScaleAdjustedRects=function(e){var t=n.getScaleCoefficient();return e.map(function(e){return w({},e,{start:e.start.map(function(e){return e*t}),end:e.end.map(function(e){return e*t})})})},n.getScaleCoefficient=function(){return n.svgRef.current.getBoundingClientRect().width/n.state.imageOriginalWidth},n.endBoundingBox=function(e){var t=Object(h.a)(n).onChange;document.removeEventListener("mouseup",n.endBoundingBox),document.removeEventListener("mousemove",n.handleMouseMove);var r=n.state.rects,o=n.setRectMinimumSize(r.find(function(e){return e.isNew}));n.setState({isCreatingNew:!1,rects:[].concat(Object(s.a)(r.filter(function(e){return!e.isNew})),[w({},o,{isNew:!1})])},function(){return t(n.state.rects)})},n.setRectMinimumSize=function(e){var t=e.start,n=e.end;return Math.abs(t[0]-n[0])<M&&(n[0]=t[0]+M),Math.abs(t[1]-n[1])<M&&(n[1]=t[1]+M),w({},e,{start:[Math.min(t[0],n[0]),Math.min(t[1],n[1])],end:[Math.max(t[0],n[0]),Math.max(t[1],n[1])]})},n.handleMouseMove=function(e){if(n.state.isCreatingNew&&n.state.isMouseHover){var t=e.movementX,r=e.movementY,o=n.getScaleCoefficient(),a=n.state.rects,i=a.find(function(e){return e.isNew});n.setState({rects:[].concat(Object(s.a)(a.filter(function(e){return!e.isNew})),[w({},i,{end:[i.end[0]+t/o,i.end[1]+r/o]})])})}},n.startBoundingBox=function(e){document.addEventListener("mouseup",n.endBoundingBox),document.addEventListener("mousemove",n.handleMouseMove);var t=n.svgRef.current.getBoundingClientRect(),r=n.state.rects,o=n.getScaleCoefficient();n.setState({isCreatingNew:!0,rects:[].concat(Object(s.a)(r),[{start:[(e.clientX-t.x)/o,(e.clientY-t.y)/o],end:[(e.clientX-t.x)/o,(e.clientY-t.y)/o],isNew:!0,id:p()()}])})},n.handleDelete=function(e){n.setState({rects:n.state.rects.filter(function(t){return t.id!==e})},function(){return n.onChange()})},n.handleMouseLeave=function(){return n.setState({isMouseHover:!1})},n.handleMouseEnter=function(){return n.setState({isMouseHover:!0})},n.handleChange=function(e,t,r,o,a){var i=n.getScaleCoefficient();if(e=1*e/i,t=1*t/i,r=1*r/i,o=1*o/i,n.state.isMouseHover){var c=n.state.rects,u=c.find(function(e){return e.id===a}),l=n.svgRef.current.getBoundingClientRect(),d=l.width,g=l.height;d/=i,g/=i;var h=[e,t],f=[r,o];(t<=0||o>=g)&&(h=[e,u.start[1]],f=[r,u.end[1]]),(e<0||r>d)&&(h=[u.start[0],t],f=[u.end[0],o]),n.setState({rects:[].concat(Object(s.a)(c.filter(function(e){return e.id!==a})),[w({},u,{start:h,end:f})])},function(){return n.onChange()})}},n.svgRef=o.a.createRef(),n.onChange=y.a.debounce(n.onChange,400),n.state={rects:[{start:[299,84],end:[407,194],id:p()()}],imageOriginalWidth:0,isMouseHover:!1,isCreatingNew:!1},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Image;t.onload=function(t){var n=t.target,r=n.width,o=n.height/r,a=e.svgRef.current.getBoundingClientRect().width;e.setState({imageOriginalWidth:r,ratio:o,currentHeight:a*o})},t.src=this.props.imageUrl,window.addEventListener("resize",y.a.throttle(this.handleResize,500))}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("mousedown",this.startBoundingBox),window.removeEventListener("resize",y.a.throttle(this.handleResize,500))}},{key:"render",value:function(){var e=this,t=this.state.rects,n=this.svgRef.current?this.getScaleAdjustedRects(t):t;return o.a.createElement("div",null,o.a.createElement("svg",{ref:this.svgRef,height:this.state.currentHeight,width:"100%",style:{backgroundImage:'url("'.concat(this.props.imageUrl,'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",maxWidth:"100%"},onMouseDown:this.startBoundingBox,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},n.map(function(t){return o.a.createElement(v,Object.assign({},t,{key:t.id,onChange:e.handleChange,onDelete:e.handleDelete}))})))}}]),t}(o.a.Component),C=(n(23),function(e){return console.log("result: ",e)}),O="https://try.handl.ai/static/demo/aabb/appartment.jpg";var D=function(){return o.a.createElement("div",{className:"App",style:{fontFamily:"'Lato',  Arial, Helvetica, sans-serif",padding:"30px 50px",backgroundColor:"#8EC5FC",backgroundImage:"linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%)",height:"100vh",boxSizing:"border-box",color:"#fff"}},o.a.createElement("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},o.a.createElement("div",null,o.a.createElement("header",{className:"App-header",style:{height:100}},o.a.createElement("h1",{style:{textAlign:"center",color:"#fff",textShadow:"-1px -1px 1px rgba(255,255,255,.1), 1px 1px 1px rgba(0,0,0,.15)"}},"Bounding Box Tool"," ",o.a.createElement("span",{role:"img","aria-label":"BB"},"\ud83d\udd31"))),o.a.createElement("div",{style:{maxWidth:"100%",display:"flex"}},o.a.createElement("div",{style:{width:"70%"}},o.a.createElement(x,{onChange:C,imageUrl:O})),o.a.createElement("h2",{style:{textAlign:"left",marginLeft:"60px",width:"30%",position:"relative",textShadow:"-1px -1px 1px rgba(255,255,255,.1), 1px 1px 1px rgba(0,0,0,.15)"}},o.a.createElement("span",{style:{position:"absolute",top:"-30px"}},"\ud83d\udc48")," ","Mark any objects ",o.a.createElement("br",null),"you like in the image ",o.a.createElement("br",null),"and see result ",o.a.createElement("br",null),"in devtools console"," "))),o.a.createElement("footer",{style:{textAlign:"center"}},"By Denis Zuykov with ",o.a.createElement("span",null,"\ud83d\udda4"))))};i.a.render(o.a.createElement(D,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.0b783536.chunk.js.map